#!/usr/bin/env sh

API_CHECK=$(git diff HEAD~ --name-only | grep 'api/' | wc -l)
CLIENT_CHECK=$(git diff HEAD~ --name-only | grep 'src/' | wc -l)

function check_files() {
  echo "${IYellow}Lint / Pretty / Build $1 files in $2"
  npx npm run precommit:$1
}

if [[ $API_CHECK -gt 1 || $CLIENT_CHECK -gt 1 ]]; then
  check_files api
  check_files client
  echo "${IGreen}All steps succeeded"
  exit 0
fi

echo "${IGreen}All files up to date"
exit 0
