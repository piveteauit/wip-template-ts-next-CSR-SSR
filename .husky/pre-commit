#!/usr/bin/env bash

function check_api() {
  API_CHECK=$(git diff HEAD~ --name-only | grep 'api/') | wc -c
  if [[ $API_CHECK -gt 1 ]]; then
    echo "${IYellow} 'Lint / Pretty / Build api'"
    npx npm run precommit:api
    echo "${IGreen} 'All steps succeeded for api'"
  fi
}

function check_client() {
  CLIENT_CHECK=$(git diff HEAD~ --name-only | grep 'src/') | wc -c
  if [[ $CLIENT_CHECK -gt 1 ]]; then
    echo "${IYellow} 'Lint / Pretty / Build client'"
    npx npm run precommit:client
    echo "${IGreen} 'All steps succeeded for client'"
  fi
}

main() {
  check_api
  check_client
}

main
